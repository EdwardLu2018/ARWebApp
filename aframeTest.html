<!DOCTYPE HTML>
<html>
  <head>
    <script src="https://aframe.io/releases/0.6.1/aframe.min.js"></script>
    <script src="https://edwardlu2018.github.io/AR.js/aframe/build/aframe-ar.js"></script>
  </head>
  <script>
    AFRAME.registerComponent('registerevents', {
      init: function () {
        var marker = this.el;
        marker.addEventListener('markerFound', function() {
          var markerId = marker.id;
          console.log('markerFound', markerId);
          // TODO: Add your own code here to react to the marker being found.
          console.log(marker.object3D.position);

          var div = document.getElementById("hi");
          div.style.width = "100px";
          div.style.height = "100px";
          div.style.margin = "100px auto";
          div.style.textalign = "center";
          div.style.background = "red";
          div.style.color = "white";
          div.innerHTML = "Hello";
          window.setInterval(function(){
            div.left = marker.object3D.position.x + "px";
            div.top = marker.object3D.position.y + "px";
          }, 500);

        });
        marker.addEventListener('markerLost', function() {
          var markerId = marker.id;
          console.log('markerLost', markerId);
          // TODO: Add your own code here to react to the marker being lost.
        });
      }
    });
  </script>

  <body id="main" style='margin : 0px; overflow: hidden; font-family: Monospace;'>
    <title>test</title>
    <div id = "hi" style="position: fixed; top: 10px; width:100%; text-align: center; z-index: 1; color: #333;">
    </div>


    <a-scene embedded arjs='sourceType: webcam; debugUIEnabled: false;' vr-mode-ui='enabled: false'>
      <a-marker preset='custom' type='pattern' url='https://edwardlu2018.github.io/ARWebApp/AR-Toolkit.js/data/data/patt.hiro' registerevents>
        <a-entity 
            obj-model='obj: url(https://edwardlu2018.github.io/ARWebApp/pinappleModel/model.obj); 
            mtl: url(https://edwardlu2018.github.io/ARWebApp/pinappleModel/materials.mtl)'
            scale="2 2 2" rotation="45 -135 0" position="0 0.5 0">
        </a-entity>
      </a-marker>

      <a-marker preset='custom' type='pattern' url='https://edwardlu2018.github.io/ARWebApp/AR-Toolkit.js/data/data/patt.kanji' registerevents>
        <a-plane rotation="-90 0 0"></a-plane>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>
  </body>
</html> 